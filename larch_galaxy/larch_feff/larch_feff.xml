<tool id="larch_feff" name="Larch FEFF" version="@TOOL_VERSION@+galaxy@WRAPPER_VERSION@" python_template_version="3.5" profile="22.05" license="MIT">
    <description>generate FEFF paths from XAFS data</description>
    <macros>
        <!-- version of underlying tool (PEP 440) -->
        <token name="@TOOL_VERSION@">0.9.66</token>
        <!-- version of this tool wrapper (integer) -->
        <token name="@WRAPPER_VERSION@">0</token>
        <!-- citation should be updated with every underlying tool version -->
        <!-- typical fields to update are version, month, year, and doi -->
        <token name="@TOOL_CITATION@">10.1088/1742-6596/430/1/012007</token>
    </macros>
    <creator>
        <person givenName="Patrick" familyName="Austin" url="https://github.com/patrick-austin"/>
        <organization url="https://muon-spectroscopy-computational-project.github.io/index.html" name="The Muon Spectroscopy Computational Project"/>
    </creator>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">xraylarch</requirement>
        <requirement type="package" version="3.5.2">matplotlib</requirement>
        <!-- xraydb 4.5.0 is compatible with sqlalchemy 2, but is not yet available on condaforge so pin it -->
        <requirement type="package" version="4.4.7">xraydb</requirement>
        <requirement type="package" version="1.4.46">sqlalchemy</requirement>
        <requirement type="package" version="2023.3.23">pymatgen</requirement>
    </requirements>
    <required_files>
        <include type="literal" path="larch_feff.py"/>
    </required_files>
    <command detect_errors="exit_code"><![CDATA[
        python '${__tool_directory__}/larch_feff.py' '$structure_file'
        && zip -r out.zip feff
    ]]></command>
    <inputs>
        <param name="structure_file" type="data" format="cif, txt" label="Crystal structure file" help="Crystal structure file to be used for fitting, in CIF or FEFF .inp format."/>
    </inputs>
    <outputs>
        <data name="out_csv" format="csv" from_work_dir="out.csv" label="CSV summary of ${structure_file.name}"/>
        <data name="out_dir" format="zip" from_work_dir="out.zip" label="FEFF paths of ${structure_file.name}"/>
    </outputs>
    <tests>
    </tests>
    <help><![CDATA[
        TODO
    ]]></help>
    <citations>
        <citation type="doi">@TOOL_CITATION@</citation>
        <citation type="doi">10.1107/S0909049505012719</citation>
    </citations>
</tool>